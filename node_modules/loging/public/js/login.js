const $ = (selector, parent) => {
    parent = parent || document;
    return typeof selector === 'string' ? parent.querySelector(selector) : selector;
}
let user = $('.user');
let pwd = $('.pwd');
let storage = localStorage;

function login() {
    // GET请求
    // axios.get('/api/list', {
    //     params: {
    //         username: user.value,
    //         password: pwd.value
    //     }
    // }).then((result) => {
    //     if (result.data) {
    //         location.href = 'https://taobao.com';
    //     } else {
    //         alert('输入错误');
    //     }
    // })
    // POST请求
    axios.post('/api/list', {
        username: user.value,
        password: pwd.value
    }).then((result) => {
        if (result.data) {
            storage.setItem('data', `欢迎${result.data}!!!!`);
            location.href = 'home.html';
        } else {
            alert('输入错误');
        }
    });
}

function register() {
    axios.post('/api/register', {
        username: user.value,
        password: pwd.value
    }).then(({ data }) => {
        if (data) {
            alert('注册成功');
        } else {
            alert('注册失败');
        }
    })
}
$('.register').addEventListener('click', () => {
    register();
})
$('.loging').addEventListener('click', function() {
    login();
});
document.addEventListener('keyup', (e) => {
    if (e.key === 13) {
        login();
    }
})